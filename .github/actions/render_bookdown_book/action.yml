name: 'Render Bookdown Book'
description: ''
inputs:
  repository-root:
    description: 'The root of the repository containing the bookdown source files'
    required: true
runs:
  using: "composite"
  steps:
    - name: Test for Pandoc
      id: pandoc-test
      run: pandoc --version
      shell: bash
      continue-on-error: true

    - name: Install Pandoc
      if: always() && steps.pandoc-test.outcome == 'failure'
      uses: r-lib/actions/setup-pandoc@v2

    - name: 8. Install bookdown
      run: |
        install.packages(c("bookdown"))
      shell: Rscript {0}

    - name: 9. Run bookdown
      run: |
        cd ${{ inputs.repository-root }}/documentation/script
        ./run_bookdown.sh
      shell: bash
